

/* web/extensions/timecode/bpc.min.js */
var bpc={arm:0,NOISE_THRESHOLD:3,cur:0,sec:0,msec:0,dcnt:0,line:0,prev:[],chr:0,tod:0,time:0,end:null};function bpc_dmsg(t){w3_innerHTML("id-tc-bpc",t)}function bpc_legend(){}function bpc_decode(t){}function bpc_clr(){var t=bpc;t.cur=t.cnt=t.one_width=t.zero_width=0,t.arm=t.no_modulation=t.dcnt=t.modct=t.line=t.sec=t.msec=0,tc.trig=0,null!=server_time_local&&""!=server_time_local&&(t.time=3600*parseInt(server_time_local)+60*parseInt(server_time_local.substr(3))+60),t.tod=t.time}function bpc_ampl(t){var c=bpc;if((t=t>.5?1:0)==c.cur)c.cnt=0;else if(c.cnt++,c.cnt>c.NOISE_THRESHOLD)if(c.cur=t,c.cnt=0,tc.data_last=tc.data,tc.data^=1,tc.data){if(tc.trig){if(0==c.dcnt){var e=c.tod,n=Math.floor(e/3600);e-=3600*n;var i=Math.floor(e/60);e-=60*i,tc_dmsg(n.leadingZeros(2)+":"+i.leadingZeros(2)+":"+e.leadingZeros(2)+" "),c.tod+=20}var r=Math.round((c.zero_width-9)/10)+1,d=r+"  ";r!=c.prev[c.dcnt]&&c.line&&(d='<span style="color:lime">'+r+"</span>. "),c.prev[c.dcnt]=r,tc_dmsg(d),c.dcnt++,c.dcnt>=19&&(tc_dmsg("<br>"),c.dcnt=0,c.line++)}c.one_width=0}else c.zero_width=0;tc.data?c.one_width++:c.zero_width++,tc.state==tc.ACQ_SYNC&&0==c.arm&&c.one_width>=170&&(c.arm=1,c.one_width=0),1==c.arm&&1==tc.data_last&&0==tc.data&&(c.arm=2,tc.trig=1),c.msec+=10,1e3==c.msec&&(c.sec++,c.msec=0)}function bpc_focus(){}function bpc_blur(){var t;(t=w3_el("id-tc-bits"))&&(t.innerHTML=""),(t=w3_el("id-tc-bpc"))&&(t.innerHTML="")}function bpc_init(){w3_el("id-tc-addon").innerHTML+=w3_div("id-tc-bits")+w3_div("id-tc-bpc")}


