

/* web/extensions/timecode/bpc.min.js */
var bpc={arm:0,NOISE_THRESHOLD:3,cur:0,sec:0,msec:0,dcnt:0,line:0,prev:[],crnt:[],diff:[],chr:0,tod:0,time:0,dibit:["00","01","10","11","--"],end:null};function bpc_dmsg(t){w3_innerHTML("id-tc-bpc",t)}function bpc_legend(){}function bpc_decode(t){}function bpc_clr(){var t=bpc;t.cur=t.cnt=t.one_width=t.zero_width=0,t.arm=t.no_modulation=t.dcnt=t.modct=t.line=t.sec=t.msec=0,tc.trig=0,null!=server_time_local&&""!=server_time_local&&(t.time=3600*parseInt(server_time_local)+60*parseInt(server_time_local.substr(3))+60),t.tod=t.time}function bpc_ampl(t){var c,e=bpc;if((t=t>.5?1:0)==e.cur)e.cnt=0;else if(e.cnt++,e.cnt>e.NOISE_THRESHOLD)if(e.cur=t,e.cnt=0,tc.data_last=tc.data,tc.data^=1,tc.data){if(tc.trig){if(0==e.dcnt){var i=e.tod,n=Math.floor(i/3600);i-=3600*n;var d=Math.floor(i/60);i-=60*d,tc_dmsg(n.leadingZeros(2)+":"+d.leadingZeros(2)+":"+i.leadingZeros(2)+" "),e.tod+=20}var r=Math.round((e.zero_width-9)/10),a=r+"  ";if(e.diff[e.dcnt]=0,r!=e.prev[e.dcnt]&&e.line&&(a='<span style="color:lime">'+r+"</span>. ",e.diff[e.dcnt]=1),e.prev[e.dcnt]=r,tc_dmsg(a),e.dcnt++,e.dcnt>=19){for(tc_dmsg("   "),c=0;c<19;c++){var o=e.prev[c];o>=4&&(o=4),a=e.dibit[o],e.diff[c]&&(a='<span style="color:lime">'+a+"</span>"),tc_dmsg(a)}tc_dmsg("<br>"),e.dcnt=0,e.line++}}e.one_width=0}else e.zero_width=0;tc.data?e.one_width++:e.zero_width++,tc.state==tc.ACQ_SYNC&&0==e.arm&&e.one_width>=170&&(e.arm=1,e.one_width=0),1==e.arm&&1==tc.data_last&&0==tc.data&&(e.arm=2,tc.trig=1),e.msec+=10,1e3==e.msec&&(e.sec++,e.msec=0)}function bpc_focus(){}function bpc_blur(){var t;(t=w3_el("id-tc-bits"))&&(t.innerHTML=""),(t=w3_el("id-tc-bpc"))&&(t.innerHTML="")}function bpc_init(){w3_el("id-tc-addon").innerHTML+=w3_div("id-tc-bits")+w3_div("id-tc-bpc")}


